Open Food Facts, gıda ürünleri hakkında bilgi almak için logoları nasıl kullanıyor

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3><strong>🧂Bir tutam bağlam:</strong> “logolar” ?</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Open Food Facts yaklaşık <strong>3 milyon ürünle</strong> doludur. Her ürünün mümkün olduğunca çok insanın ilgisini çekecek şekilde yapılmış bir ambalajı vardır. Bu bağlamda üreticiler, ürünlerinin niteliklerini <strong>gösterişli ve açıklayıcı sembollerle</strong> vurgulamaktadırlar. Bu semboller çok sayıdadır ve ürünün markası, kalitesi, bileşimi, yapılma şekli, hangi çekirdeğin atılacağı vb. hakkında bilgi verebilir…&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Tüm sembolleri homojenleştirmek ve tüketicilerin kendilerine uygun ürünleri bulmalarına yardımcı olmak için <strong>çeşitli kurumlar, üreticilerin ürünlerini "logo" olarak adlandırdığımız belirli sembollerle işaretleyebilmeleri için katı kurallar oluşturmuştur</strong>. Dolayısıyla bu logoları tespit ederek ürünler hakkında veri elde etmek için büyük bir fırsat 🔥 var!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Open Food Facts bunları nasıl tespit etmelidir? Her zaman olduğu gibi teknoloji ve katkıda bulunanların karışımı sayesinde!</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Eski bir Open Food Facts katılımcısı olan ve şu anda kalıcı ekibin bir parçası olan ve staj danışmanım olan Raphaël Bournhonesque, Robotoff* <strong>'da görüntülerden logoları çıkarmak, bunları vektörlere dönüştürmek ve her vektörün en yakın komşularını bulmak için bir sistem geliştirmişti..</strong> Logoların komşularını bulmanın amacı, <strong>katkıda bulunanların, <a rel="noreferrer noopener" href="https://hunger.openfoodfacts.org/" target="_blank">Açlık Oyunları</a> adlı bir platform aracılığıyla çok sayıda logoya aynı anda "açıklama eklemesine" (manuel olarak kategorilere ayırmasına) olanak sağlamaktı.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Ancak o dönemde kullanılan modeller ve algoritmalar yeterince verimli sonuçlar veremiyordu.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Eylül 2022'de mühendislik öğrencisi olarak logolara yönelik 6 aylık bir staj için ekibe katıldım ve tüm bu süreci yeniden düzenlemek için çalıştım! 🥳&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:table -->
<figure class="wp-block-table"><table><tbody><tr><td><strong>* Robotoff nedir?</strong><br><a rel="noreferrer noopener" href="https://github.com/openfoodfacts/robotoff" target="_blank">Robotoff</a>, Open Food Facts verilerinin işlenmesine yardımcı olmak amacıyla katkıda bulunanlar tarafından geliştirilen bir hizmettir. Veritabanında halihazırda mevcut olan verilere dayanarak amaç, her ürün hakkında mümkün olduğunca fazla bilgi almak ve bunları veritabanına eklemektir. Şu anda Robotoff tarafından yapılan güncellemeler, Optik Karakter Tanıma veya daha genel Bilgisayarlı Görme modelleri yoluyla görüntü analizinden gelmektedir. Bazı güncellemeler veritabanına otomatik olarak uygulanır, ancak bazılarının sorular veya Açlık Oyunları aracılığıyla manuel olarak doğrulanması gerekir.<br><br><em><strong>Robotoff hakkında daha fazla bilgi edinmek için <a rel="noreferrer noopener" href="https://github.com/openfoodfacts/robotoff#readme" target="_blank">buraya</a> göz atın! </strong></em> 👀</td></tr></tbody></table></figure>
<!-- /wp:table -->

<!-- wp:heading {"level":3} -->
<h3><strong>🫗 Biraz teknoloji: </strong>Logo işleme tam olarak nasıl çalışıyor?</h3>
<!-- /wp:heading -->

<!-- wp:heading {"level":4} -->
<h4><em>1️⃣ </em>Ürün resimlerinden logoları dışarı çıkarın:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Open Food Facts'e katkıda bulunanlar, resimlerdeki logoları tanımak için bir Makine Öğrenimi modeli eğitti. Modelin girdisi olarak bir görüntü koyarız ve ilgili puan ve sınıflara sahip birden fazla sınırlayıcı kutu alırız. Modelin eğitildiği sınıflar “marka” ve “etiket” idi.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Modelin çağrıldığı kodu burada bulabilirsiniz: <a href="https://github.com/openfoodfacts/robotoff/blob/b209707cc062310b51f9886c87ee14be91527644/robotoff/workers/tasks/import_image.py#L325" target="_blank" rel="noreferrer noopener">Robotoff.import_image.py</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Aşağıdaki API'yi kullanarak deneyebilirsiniz:&nbsp;<a href="https://robotoff.openfoodfacts.net/api/v1/images/predict?image_url=[image_url]&amp;models=universal-logo-detector" target="_blank" rel="noreferrer noopener">https://robotoff.openfoodfacts.net/api/v1/images/predict?image_url=[image_url]&amp;models=universal-logo-detector</0></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sınırlayıcı kutularla, API'ye karşılık gelen logoların neler olduğunu görebilirsiniz: <a href="https://robotoff.openfoodfacts.net/api/v1/images/crop?image_url=[image_url]&amp;y_min=[y_min]&amp;x_min=[x_min]&amp;y_max=[y_max]&amp;x_max=[x_max]" target="_blank" rel="noreferrer noopener">https://robotoff.openfoodfacts.net/api/v1/images/crop?image_url=[image_url]&amp;y_min=[y_min] &amp;x_min=[x_min]&amp;y_max=[y_max]&amp;x_max=[x_max]</a> burada koordinatlar, model tarafından sınırlayıcı kutularda döndürülenlerle aynı sıradadır.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Bu API'leri aşağıdaki görüntüyle kullanırken neler olduğuna dair bir örneği burada bulabilirsiniz:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><a href="https://images.openfoodfacts.org/images/products/322/982/012/9488/front_fr.194.400.jpg" target="_blank" rel="noreferrer noopener">https://images.openfoodfacts.org/images/products/322/982/012/9488/front_fr.194.400.jpg</a></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":3425,"width":806,"height":252,"sizeSlug":"large","linkDestination":"none"} -->
<figure class="wp-block-image size-large is-resized"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-14.34.51-1024x321.png" alt="" class="wp-image-3425" width="806" height="252"/></figure>
<!-- /wp:image -->

<!-- wp:heading {"level":4} -->
<h4><em>2️⃣ </em>Logo resimlerini Vektörlere dönüştürün:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Artık logolara erişebildiğimize göre onları vektörleştirmemiz gerekiyor</strong>. Bunun için OpenAI'nin <a href="https://huggingface.co/docs/transformers/model_doc/clip" target="_blank" rel="noreferrer noopener">CLIP</a>adlı önceden eğitilmiş bir modelini kullanıyoruz. Model başlangıçta görüntüleri metinle eşleştirmek üzere eğitilmiş olsa da, her logo için CLIP tarafından hesaplanan yerleştirmeleri (=bir vektör uzayına gömülü logolar) elde etmek için modelin yalnızca "bilgisayarlı görme" kısmını kullanıyoruz.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Böylece girdi olarak bir logo resmimiz ve çıktı olarak 512 boyutlu bir vektörümüz var. İki vektör arasındaki mesafe ne kadar küçük olursa, karşılık gelen iki logo da o kadar benzer olur.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Robotoff'taki <a href="https://github.com/openfoodfacts/robotoff/blob/b209707cc062310b51f9886c87ee14be91527644/robotoff/workers/tasks/import_image.py#L398" target="_blank" rel="noreferrer noopener">save_logo_embeddings</a> işlevi, modelin logolara uygulanmasından ve yerleştirmelerin Robotoff postgresql veritabanına kaydedilmesinden sorumludur.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Logo yerleştirmeleri oluşturmak için CLIP'i nasıl kullandığımızı anlamak için <a href="https://github.com/openfoodfacts/openfoodfacts-ai/blob/develop/logo-ann/generation/02_generate_embeddings.py#L108" target="_blank" rel="noreferrer noopener">burada</a> daha açık bir kod bulabilirsiniz.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4><em>3️⃣ </em>En yakın komşuları bul:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Bir logonun en yakın komşularını bulmak için, yerleştirmeleri saklayacak bir "dizin" kullanırız. Bu indeks oluşturulduktan sonra, sorgu logosu ile veri tabanının tüm diğer logoları arasındaki mesafeyi hesaplamayı ve en yakın olanları döndürmeyi içeren <strong>"kaba kuvvet" 💪 yöntemini</strong> kullanabiliriz. Bu bize "gerçek" en yakın komşuları verdiği için en kesin yöntemdir. Ancak bu yöntemin uygulanması çok yavaştır. Toplam logo miktarı 2,5 milyon olduğunda her logo için en yakın komşuları çıkarmak için gereken süre 3 saniye civarındadır 😴</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Daha iyi bir arama süresine ihtiyacımız olduğundan ve daha az hassasiyete sahip olmaktan memnun olduğumuz için <strong>yaklaşık bir yöntem</strong> kullanmaya karar verdik. Robotoff'un kullandığına HNSW (hiyerarşik gezilebilir küçük dünya) adı verilir. En yakın komşu aramasını daha iyi anlamak için <a rel="noreferrer noopener" href="https://www.pinecone.io/learn/vector-indexes/" target="_blank">bu makaleye</a> göz atabilirsiniz.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Robotoff, HNSW ElasticSearch indeksini kullanarak artık 2,5 milyondan fazla vektör arasında yer alan her bir vektörün en yakın komşularını büyük bir hassasiyetle arayabiliyor (geri dönen 100 en yakın komşunun %90'ından fazlası tam 100 gerçek en yakın komşu arasındadır) ve 100 ms'den daha kısa bir arama süresi 👏👏👏👏.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Bir logonun en yakın komşularını bulmak için aşağıdaki API'yi kullanabilirsiniz: <a href="https://robotoff.openfoodfacts.org/api/v1/ann/search/[logo_id]?count=[count]">https://robotoff.openfoodfacts.org/api/v1/ann/search/[logo_id]?count=[count]</a></p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3><strong>🍯 Bir kaşık katkı maddesi: </strong>Nerelerde kullanılır?</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Robotoff'ta henüz otomatik logo sınıflandırması uygulanmamıştır. Daha önce anlattığım her şey yalnızca <a href="https://hunger.openfoodfacts.org/">Açlık Oyunları</a> için yapıldı.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Bu da nedir? Alexandre Fauquette adlı bir katılımcı tarafından geliştirilen <strong>bir açıklama platformudur</strong> ve <strong>herkesin Robotoff tarafından yapılan çek tahminlerini yanıtlamasına ve logoları kategorilere ayırmasına olanak tanır</strong>.&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><br>Deneyebilirsin. Hızlı bir tanıtım/öğretici sizi karşılayacak ve logolara açıklama ekleyebileceksiniz! 😉<br>“Açlık Oyunları nasıl kullanılır?” konulu eğitim videosu yakında çıkmalı… ⏳</p>
<!-- /wp:paragraph -->

<!-- wp:image {"align":"center","id":3433,"width":505,"height":633,"sizeSlug":"full","linkDestination":"custom"} -->
<figure class="wp-block-image aligncenter size-full is-resized"><a href="hunger.openfoodfacts.org"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-14.44.23.png" alt="" class="wp-image-3433" width="505" height="633"/></a><figcaption class="wp-element-caption">Açlık Oyunlarını oynamak için: hunger.openfoodfacts.org</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p><strong>Açıklamalı logolar, ürünler ve kalitesi hakkında sahip olduğumuz veri miktarını artırdıkça Open Food Facts'i geliştirir.</strong> Ayrıca arka planda kullanılan modeller ve algoritmalar sayesinde günlük beslenme konusunda çok daha güçlü olabilir ve insanlar üzerinde daha büyük bir etki bırakabilirsiniz. 🥰.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Makaleyi oluşturan: Gabriel</p>
<!-- /wp:paragraph -->

<!-- wp:image {"align":"left","id":3418,"width":167,"height":167,"sizeSlug":"full","linkDestination":"none"} -->
<figure class="wp-block-image alignleft size-full is-resized"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Gabriel.png" alt="" class="wp-image-3418" width="167" height="167"/></figure>
<!-- /wp:image -->
