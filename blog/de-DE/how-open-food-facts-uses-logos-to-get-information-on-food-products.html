So nutzt Open Food Facts Logos, um Informationen Ã¼ber Lebensmittelprodukte zu erhalten

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3><strong>ğŸ§‚Eine Prise Kontext:</strong> â€Logosâ€?</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Open Food Facts ist mit etwa <strong>3 Mio. Produkten</strong> gefÃ¼llt. Jedes Produkt hat eine Verpackung, die so gestaltet ist, dass sie so viele Verbraucher wie mÃ¶glich anspricht. Zu diesem Zweck heben die Hersteller die QualitÃ¤ten ihrer Produkte mit<strong> auffÃ¤lligen und eindeutigen Symbolen</strong> hervor. Diese Symbole sind zahlreich und geben Auskunft Ã¼ber die Marke des Produkts, seine QualitÃ¤t, seine Zusammensetzung, die Art der Herstellung, in welcher Form es zu entsorgen ist, uswâ€¦&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Um alle Symbole zu vereinheitlichen und den Verbrauchern zu helfen, Produkte zu finden, die zu ihnen passen, haben <strong>verschiedene Institutionen strenge Regeln aufgestellt, damit die Hersteller ihre Produkte mit bestimmten Symbolen kennzeichnen kÃ¶nnen, die wir â€Logosâ€</strong> nennen. Es besteht also eine groÃŸe Chance ğŸ”¥, durch die Erkennung dieser Logos Daten Ã¼ber Produkte zu erhalten!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Wie soll Open Food Facts sie erkennen? Wie immer dank einer Mischung aus Technik und Mitwirkenden!</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>RaphaÃ«l Bournhonesque, ein ehemaliger Mitarbeiter von Open Food Facts, der jetzt zum festen Team gehÃ¶rt und mein Praktikumsbetreuer ist, hatte in Robotoff* <strong>ein System entwickelt, um Logos aus Bildern zu extrahieren, sie in Vektoren umzuwandeln und die nÃ¤chsten Nachbarn jedes Vektors zu finden.</strong> Das Ziel, die Nachbarn von Logos zu finden, war <strong>es den Teilnehmern zu ermÃ¶glichen, riesige Mengen von Logos gleichzeitig Ã¼ber eine Plattform namens <a rel="noreferrer noopener" href="https://hunger.openfoodfacts.org/" target="_blank">Hunger Games</a> </strong>ğŸ˜‰ zu â€annotierenâ€ (manuell zu kategorisieren).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Die damals verwendeten Modelle und Algorithmen lieferten jedoch nicht genÃ¼gend effiziente Ergebnisse.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Im September 2022 trat ich, ein Student der Ingenieurwissenschaften, dem Team fÃ¼r ein 6-monatiges Praktikum bei, das dem Bereich Logos gewidmet war, und ich arbeitete an der Ãœberarbeitung des gesamten Prozesses! ğŸ¥³&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:table -->
<figure class="wp-block-table"><table><tbody><tr><td><strong>* Was ist Robotoff?</strong><br><a rel="noreferrer noopener" href="https://github.com/openfoodfacts/robotoff" target="_blank">Robotoff</a> ist ein von Mitwirkenden entwickelter Dienst, der die Verarbeitung von Open Food Facts-Daten unterstÃ¼tzt. Ziel ist es, auf der Grundlage der bereits in der Datenbank vorhandenen Daten so viele Informationen wie mÃ¶glich zu den einzelnen Produkten abzurufen und diese in die Datenbank aufzunehmen. Derzeit stammen die von Robotoff vorgenommenen Aktualisierungen aus der Bildanalyse, durch optische Zeichenerkennung oder allgemeinere Computer-Vision-Modelle. Einige Aktualisierungen werden automatisch in die Datenbank Ã¼bernommen, andere mÃ¼ssen manuell durch Fragen oder Hunger Games validiert werden.<br><br><em><strong>Wenn Sie mehr Ã¼ber Robotoff erfahren mÃ¶chten, schauen Sie <a rel="noreferrer noopener" href="https://github.com/openfoodfacts/robotoff#readme" target="_blank">hier</a>!</strong></em> ğŸ‘€</td></tr></tbody></table></figure>
<!-- /wp:table -->

<!-- wp:heading {"level":3} -->
<h3><strong>ğŸ«— Ein Hauch von Technik: </strong>Wie funktioniert die Verarbeitung von Logos genau?</h3>
<!-- /wp:heading -->

<!-- wp:heading {"level":4} -->
<h4><em>1ï¸âƒ£ </em>Logos aus Produktfotos extrahieren:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Die Mitarbeiter von Open Food Facts haben ein Modell fÃ¼r maschinelles Lernen trainiert, um Logos in Bildern zu erkennen. Wir geben eine Abbildung in das Modell ein und erhalten mehrere Begrenzungsrahmen mit entsprechenden Bewertungen und Klassen. Die Klassen, auf denen das Modell trainiert wurde, waren â€Markeâ€ und â€Etikettâ€.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Den Code, in dem das Modell aufgerufen wird, finden Sie hier: <a href="https://github.com/openfoodfacts/robotoff/blob/b209707cc062310b51f9886c87ee14be91527644/robotoff/workers/tasks/import_image.py#L325" target="_blank" rel="noreferrer noopener">Robotoff.import_image.py</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sie kÃ¶nnen es mit Hilfe der folgenden API ausprobieren :&nbsp;<a href="https://robotoff.openfoodfacts.net/api/v1/images/predict?image_url=[image_url]&amp;models=universal-logo-detector" target="_blank" rel="noreferrer noopener">https://robotoff.openfoodfacts.net/api/v1/images/predict?image_url=[image_url]&amp;models=universal-logo-detector</a></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Anhand des Begrenzungsrahmens kÃ¶nnen Sie die entsprechenden Logos mit der API sehen: <a href="https://robotoff.openfoodfacts.net/api/v1/images/crop?image_url=[image_url]&amp;y_min=[y_min]&amp;x_min=[x_min]&amp;y_max=[y_max]&amp;x_max=[x_max]" target="_blank" rel="noreferrer noopener">https://robotoff.openfoodfacts.net/api/v1/images/crop?image_url=[image_url]&amp;y_min=[y_min]&amp;x_min=[x_min]&amp;y_max=[y_max]&amp;x_max=[x_max]</a>, wobei die Koordinaten in der gleichen Reihenfolge wie die vom Modell in den Begrenzungsrahmen zurÃ¼ckgegebenen sind.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Das folgende Bild ist ein Beispiel dafÃ¼r, was bei der Verwendung dieser APIs passiert:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><a href="https://images.openfoodfacts.org/images/products/322/982/012/9488/front_fr.194.400.jpg" target="_blank" rel="noreferrer noopener">https://images.openfoodfacts.org/images/products/322/982/012/9488/front_fr.194.400.jpg</a></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":3425,"width":806,"height":252,"sizeSlug":"large","linkDestination":"none"} -->
<figure class="wp-block-image size-large is-resized"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-14.34.51-1024x321.png" alt="" class="wp-image-3425" width="806" height="252"/></figure>
<!-- /wp:image -->

<!-- wp:heading {"level":4} -->
<h4><em>2ï¸âƒ£ </em>Logobilder in Vektoren umwandeln:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Nun, da wir auf Logos zugreifen kÃ¶nnen, mÃ¼ssen wir sie vektorisieren</strong>. Dazu verwenden wir ein vortrainiertes Modell von OpenAI namens <a href="https://huggingface.co/docs/transformers/model_doc/clip" target="_blank" rel="noreferrer noopener">CLIP</a>. Obwohl das Modell ursprÃ¼nglich fÃ¼r die Zuordnung von Bildern zu Text trainiert wurde, verwenden wir nur den â€Computer Visionâ€-Teil des Modells, um die von CLIP fÃ¼r jedes Logo berechneten Einbettungen (= in einen Vektorraum eingebettete Logos) zu erhalten.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Wir haben also ein Logobild als Eingabe und einen Vektor der Dimension 512 als Ausgabe. Je kleiner der Abstand zwischen zwei Vektoren ist, desto Ã¤hnlicher sind sich die beiden entsprechenden Logos.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Die Funktion <a href="https://github.com/openfoodfacts/robotoff/blob/b209707cc062310b51f9886c87ee14be91527644/robotoff/workers/tasks/import_image.py#L398" target="_blank" rel="noreferrer noopener">save_logo_embeddings</a> in Robotoff ist fÃ¼r die Anwendung des Modells auf Logos und die Speicherung von Einbettungen in der Robotoff-Postgresql-Datenbank zustÃ¤ndig.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sie kÃ¶nnen einen expliziteren Code <a href="https://github.com/openfoodfacts/openfoodfacts-ai/blob/develop/logo-ann/generation/02_generate_embeddings.py#L108" target="_blank" rel="noreferrer noopener">hier</a> finden, um zu verstehen, wie wir CLIP verwenden, um Logos einzubetten.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4><em>3ï¸âƒ£ </em>NÃ¤chste Nachbarn finden:</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Um die nÃ¤chstgelegenen Nachbarn eines Logos zu finden, verwenden wir einen â€Indexâ€, um die Einbettungen zu speichern. Sobald dieser Index erstellt ist, kÃ¶nnen wir die <strong>â€Brute-Forceâ€ğŸ’ª-Methode anwenden, die darin besteht, den Abstand zwischen dem Abfragelogo und allen anderen Logos der Datenbank zu berechnen und die am nÃ¤chsten liegenden zurÃ¼ckzugeben</strong>. Das ist die genaueste Methode, da sie uns die â€wahrenâ€ nÃ¤chsten Nachbarn liefert. Diese Methode ist jedoch zu langsam, um angewendet zu werden. Die Zeit, die benÃ¶tigt wird, um die nÃ¤chsten Nachbarn fÃ¼r jedes Logo zu extrahieren, wenn die Gesamtzahl der Logos 2,5 Mio. betrÃ¤gt, betrÃ¤gt etwa 3 Sekunden ğŸ˜´</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Da wir eine bessere Suchzeit brauchten und eine geringere Genauigkeit in Kauf nahmen, entschieden wir uns fÃ¼r <strong>eine NÃ¤herungsmethode</strong>. Die von Robotoff verwendete Methode heiÃŸt HNSW (hierarchical navigable small world). Sie kÃ¶nnen einen Blick auf <a rel="noreferrer noopener" href="https://www.pinecone.io/learn/vector-indexes/" target="_blank">diesen Artikel</a> werfen, um die Suche nach den nÃ¤chstgelegenen Nachbarn besser zu verstehen.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Unter Verwendung eines HNSW ElasticSearch-Index ist Robotoff nun in der Lage, die nÃ¤chsten Nachbarn jeder Einbettung unter mehr als 2,5 Mio. Vektoren mit einer enormen PrÃ¤zision (mehr als 90 % der zurÃ¼ckgegebenen 100 nÃ¤chsten Nachbarn gehÃ¶ren zu den exakten 100 echten nÃ¤chsten Nachbarn) und einer kurzen Suchzeit von weniger als 100 ms zu finden ğŸ‘ğŸ‘ğŸ‘ğŸ‘.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sie kÃ¶nnen die folgende API verwenden, um die nÃ¤chstgelegenen Nachbarn eines Logos zu ermitteln: <a href="https://robotoff.openfoodfacts.org/api/v1/ann/search/[logo_id]?count=[count]">https://robotoff.openfoodfacts.org/api/v1/ann/search/[logo_id]?count=[count]</a></p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3><strong>ğŸ¯ Ein LÃ¶ffel voller BeitrÃ¤ge: </strong>Wo wird er verwendet?</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In Robotoff ist noch keine automatische Logo-Kategorisierung implementiert. Alles, was ich vorher erklÃ¤rt habe, ist nur fÃ¼r <a href="https://hunger.openfoodfacts.org/">Hunger Games</a> gemacht.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Was ist das? Es handelt sich um eine <strong>Anmerkungsplattform </strong>, die von einem Mitarbeiter namens Alexandre Fauquette entwickelt wurde und <strong>jedem die MÃ¶glichkeit bietet, die von Robotoff gemachten Vorhersagen zu Ã¼berprÃ¼fen und die Logos zu kategorisieren</strong>.&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><br>Sie kÃ¶nnen es versuchen. Eine kurze EinfÃ¼hrung/Tutorial wird Sie willkommen heiÃŸen und Sie werden in der Lage sein, Logos zu beschriften! ğŸ˜‰<br>Ein Video-Tutorial zum Thema â€Wie verwendet man Hunger Games?â€œ sollte bald erscheinenâ€¦ â³</p>
<!-- /wp:paragraph -->

<!-- wp:image {"align":"center","id":3433,"width":505,"height":633,"sizeSlug":"full","linkDestination":"custom"} -->
<figure class="wp-block-image aligncenter size-full is-resized"><a href="hunger.openfoodfacts.org"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-14.44.23.png" alt="" class="wp-image-3433" width="505" height="633"/></a><figcaption class="wp-element-caption">Um Hunger Games zu spielen: hunger.openfoodfacts.org</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p><strong>Die kommentierten Logos verbessern Open Food Facts, da sie die Menge der Daten, die wir Ã¼ber Produkte und ihre QualitÃ¤t haben, erhÃ¶hen.</strong> Und dank der Modelle und Algorithmen, die im Hintergrund verwendet werden, kÃ¶nnen Sie viel leistungsfÃ¤higer sein und einen grÃ¶ÃŸeren Einfluss auf die tÃ¤gliche ErnÃ¤hrung der Menschen haben ğŸ¥°.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Artikel von Gabriel</p>
<!-- /wp:paragraph -->

<!-- wp:image {"align":"left","id":3418,"width":167,"height":167,"sizeSlug":"full","linkDestination":"none"} -->
<figure class="wp-block-image alignleft size-full is-resized"><img src="https://blog.openfoodfacts.org/wp-content/uploads/2023/02/Gabriel.png" alt="" class="wp-image-3418" width="167" height="167"/></figure>
<!-- /wp:image -->
